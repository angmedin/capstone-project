schema: '2.0'
stages:
  data_prepare:
    cmd: python -m src.pipeline.p1_data_prepare --config=params.yaml
    deps:
    - path: src/pipeline/p1_data_prepare.py
      hash: md5
      md5: 963d0173a060cd2d798fb372a8f68e1e
      size: 1272
    params:
      params.yaml:
        base:
          random_state: 42
        data_load:
          dataset_prepare: data/processed/prepare_beans.csv
    outs:
    - path: data/processed/prepare_beans.csv
      hash: md5
      md5: 7e173fa07b0c4d58c9cb57876aa9599b
      size: 2644236
  featurize:
    cmd: python -m src.pipeline.p2_featurize --config=params.yaml
    deps:
    - path: data/processed/prepare_beans.csv
      hash: md5
      md5: 7e173fa07b0c4d58c9cb57876aa9599b
      size: 2644236
    - path: src/pipeline/p2_featurize.py
      hash: md5
      md5: 18c1ccdeddc280a39665efe1bfb1fa3c
      size: 1749
    params:
      params.yaml:
        base:
          random_state: 42
        data_load:
          dataset_prepare: data/processed/prepare_beans.csv
        featurize:
          features_path: data/processed/featured_beans.csv
          encoder_path: encoder/encoder.joblib
    outs:
    - path: data/processed/featured_beans.csv
      hash: md5
      md5: 76e9cb55fb765eb402dee51b65a1bd24
      size: 2063108
    - path: encoder/encoder.joblib
      hash: md5
      md5: d0336c2e591a3526d16684fce3b0edce
      size: 607
  data_split:
    cmd: python -m src.pipeline.p3_data_split --config=params.yaml
    deps:
    - path: data/processed/featured_beans.csv
      hash: md5
      md5: 76e9cb55fb765eb402dee51b65a1bd24
      size: 2063108
    - path: src/pipeline/p3_data_split.py
      hash: md5
      md5: 3f0c7ce6d0078b22b077a9356300b74a
      size: 1819
    params:
      params.yaml:
        base:
          random_state: 42
        data_load:
          dataset_prepare: data/processed/prepare_beans.csv
        data_split:
          test_size: 0.2
          trainset_path: data/processed/train_beans.csv
          testset_path: data/processed/test_beans.csv
        featurize:
          features_path: data/processed/featured_beans.csv
          encoder_path: encoder/encoder.joblib
    outs:
    - path: data/processed/test_beans.csv
      hash: md5
      md5: 1cab299390964aea45de2db51f520b44
      size: 703642
    - path: data/processed/train_beans.csv
      hash: md5
      md5: 4210d306eeb69474fe1952eae47e5796
      size: 2812228
  train:
    cmd: python -m src.pipeline.p4_train --config=params.yaml
    deps:
    - path: data/processed/train_beans.csv
      hash: md5
      md5: 4210d306eeb69474fe1952eae47e5796
      size: 2812228
    - path: src/pipeline/p4_train.py
      hash: md5
      md5: dfbff597441334158ec06c0ee760fcc6
      size: 1620
    params:
      params.yaml:
        base:
          random_state: 42
        data_split.trainset_path: data/processed/train_beans.csv
        train:
          model_path: models/model.joblib
    outs:
    - path: models/model.joblib
      hash: md5
      md5: 0e7cdf9b568e424288cd0466002f0c6e
      size: 480571
  evaluate:
    cmd: python -m src.pipeline.p5_evaluate --config=params.yaml
    deps:
    - path: data/processed/test_beans.csv
      hash: md5
      md5: 1cab299390964aea45de2db51f520b44
      size: 703642
    - path: encoder/encoder.joblib
      hash: md5
      md5: d0336c2e591a3526d16684fce3b0edce
      size: 607
    - path: models/model.joblib
      hash: md5
      md5: 0e7cdf9b568e424288cd0466002f0c6e
      size: 480571
    - path: src/pipeline/p5_evaluate.py
      hash: md5
      md5: 96bdc253e90cb1c4686ee085402cfe74
      size: 2230
    params:
      params.yaml:
        base:
          random_state: 42
        data_split.testset_path: data/processed/test_beans.csv
        evaluate:
          reports_dir: reports
          metrics_file: metrics.json
        featurize.encoder_path: encoder/encoder.joblib
    outs:
    - path: reports/metrics.json
      hash: md5
      md5: 947d1e494d62c918b79a87dd017e3805
      size: 1118
