schema: '2.0'
stages:
  data_prepare:
    cmd: python -m src.pipeline.p1_data_prepare --config=params.yaml
    deps:
    - path: src/pipeline/p1_data_prepare.py
      hash: md5
      md5: 963d0173a060cd2d798fb372a8f68e1e
      size: 1272
    params:
      params.yaml:
        base:
          random_state: 42
        data_load:
          dataset_prepare: data/processed/prepare_beans.csv
    outs:
    - path: data/processed/prepare_beans.csv
      hash: md5
      md5: d82a3c760aeb33e7c946dea9ab3f2aad
      size: 2482598
  featurize:
    cmd: python -m src.pipeline.p2_featurize --config=params.yaml
    deps:
    - path: data/processed/prepare_beans.csv
      hash: md5
      md5: d82a3c760aeb33e7c946dea9ab3f2aad
      size: 2482598
    - path: src/pipeline/p2_featurize.py
      hash: md5
      md5: 18c1ccdeddc280a39665efe1bfb1fa3c
      size: 1749
    params:
      params.yaml:
        base:
          random_state: 42
        data_load:
          dataset_prepare: data/processed/prepare_beans.csv
        featurize:
          features_path: data/processed/featured_beans.csv
          encoder_path: encoder/encoder.joblib
    outs:
    - path: data/processed/featured_beans.csv
      hash: md5
      md5: 9373101acd443a148b5881fea00585d9
      size: 1901468
    - path: encoder/encoder.joblib
      hash: md5
      md5: d0336c2e591a3526d16684fce3b0edce
      size: 607
  data_split:
    cmd: python -m src.pipeline.p3_data_split --config=params.yaml
    deps:
    - path: data/processed/featured_beans.csv
      hash: md5
      md5: 9373101acd443a148b5881fea00585d9
      size: 1901468
    - path: src/pipeline/p3_data_split.py
      hash: md5
      md5: 3f0c7ce6d0078b22b077a9356300b74a
      size: 1819
    params:
      params.yaml:
        base:
          random_state: 42
        data_load:
          dataset_prepare: data/processed/prepare_beans.csv
        data_split:
          test_size: 0.2
          trainset_path: data/processed/train_beans.csv
          testset_path: data/processed/test_beans.csv
        featurize:
          features_path: data/processed/featured_beans.csv
          encoder_path: encoder/encoder.joblib
    outs:
    - path: data/processed/test_beans.csv
      hash: md5
      md5: afbafa3d1d6474f109258fc0e2a36f54
      size: 650235
    - path: data/processed/train_beans.csv
      hash: md5
      md5: 49936e14eeb9c86ab247d60d3e757fe9
      size: 2599473
  train:
    cmd: python -m src.pipeline.p4_train --config=params.yaml
    deps:
    - path: data/processed/train_beans.csv
      hash: md5
      md5: 49936e14eeb9c86ab247d60d3e757fe9
      size: 2599473
    - path: src/pipeline/p4_train.py
      hash: md5
      md5: dfbff597441334158ec06c0ee760fcc6
      size: 1620
    params:
      params.yaml:
        base:
          random_state: 42
        data_split.trainset_path: data/processed/train_beans.csv
        train:
          model_path: models/model.joblib
    outs:
    - path: models/model.joblib
      hash: md5
      md5: 8557a8ebabc4736a9bed9982968b598e
      size: 458683
  evaluate:
    cmd: python -m src.pipeline.p5_evaluate --config=params.yaml
    deps:
    - path: data/processed/test_beans.csv
      hash: md5
      md5: afbafa3d1d6474f109258fc0e2a36f54
      size: 650235
    - path: encoder/encoder.joblib
      hash: md5
      md5: d0336c2e591a3526d16684fce3b0edce
      size: 607
    - path: models/model.joblib
      hash: md5
      md5: 8557a8ebabc4736a9bed9982968b598e
      size: 458683
    - path: src/pipeline/p5_evaluate.py
      hash: md5
      md5: 96bdc253e90cb1c4686ee085402cfe74
      size: 2230
    params:
      params.yaml:
        base:
          random_state: 42
        data_split.testset_path: data/processed/test_beans.csv
        evaluate:
          reports_dir: reports
          metrics_file: metrics.json
        featurize.encoder_path: encoder/encoder.joblib
    outs:
    - path: reports/metrics.json
      hash: md5
      md5: fb03ad9dce71f0398a4119f45a9c82a7
      size: 1119
